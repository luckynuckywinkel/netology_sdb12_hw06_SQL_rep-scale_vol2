# Домашнее задание к занятию «Репликация и масштабирование. Часть 2», Лебедев А. И., fops-10


### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
- SAN-кластер.

*Дайте ответ в свободной форме.*  

### Ответ:  

- **Активный master и пассивный slave:** Этот метод обеспечивает резервное копирование и высокую доступность. Когда основной сервер (master) недоступен, пассивный сервер (slave) может взять на себя работу. Такой метод подходит для приложений, где недопустимы простои.

- **Множество slave-серверов:** Этот метод позволяет распределить нагрузку на чтение и обеспечивает отказоустойчивость. Если один из серверов выходит из строя, другие могут продолжить работу.

- **DRBD:** Этот механизм репликации обеспечивает высокую доступность и синхронность данных. В случае сбоя основного сервера, реплика может мгновенно взять на себя обработку запросов.

- **SAN-кластер:** Такой кластер предоставляет высокую доступность и централизованное управление. Все серверы могут иметь доступ к общему хранилищу, что облегчает обмен данными.

---

### Задание 2


Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.*   

### Ответ:  

- Данное задание я буду выполнять путем добавления таблицы в задание 3. Таблица будет простая, но, тем не менее, с примерами обоих типов масштабирования:

```
-- Создание базы данных
CREATE DATABASE example_db;

-- Создание таблицы "users" для вертикального шаринга (разделение столбцов между таблицами)
CREATE TABLE users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255),
    email VARCHAR(255)
);

-- Создание таблицы "books" для горизонтального шаринга (разделение строк между базами данных)
CREATE TABLE books (
    book_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,  ## Внешний ключ, связанный с user_id в таблице users
    title VARCHAR(255),
    author VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES users(user_id)  -- Связь с таблицей users по user_id
);

-- Создание таблицы "stores" для горизонтального шаринга (разделение строк между базами данных)
CREATE TABLE stores (
    store_id INT AUTO_INCREMENT PRIMARY KEY,
    store_name VARCHAR(255),
    location VARCHAR(255)
);
```

## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

---
### Задание 3*

Выполните настройку выбранных методов шардинга из задания 2.

*Пришлите конфиг Docker и SQL скрипт с командами для базы данных*.
